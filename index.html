<!DOCTYPE html>
<html>
<head>
<title>Authentification</title>
<meta name="generator" content="Bluefish 2.2.7" >
<meta name="author" content="Anton Yun" >
<meta name="date" content="2017-10-02T17:55:13+0800" >
<meta name="copyright" content="">
<meta name="keywords" content="">
<meta name="description" content="">
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW">
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<meta http-equiv="content-type" content="application/xhtml+xml; charset=UTF-8">
<meta http-equiv="content-style-type" content="text/css">
<meta http-equiv="expires" content="0">
</head>
<body>
<form action="/" method="POST">
<input type="hidden" name="grant_type" id="grant_type" value="password"/>
<input type="text" name="username" id="username" /><br />
<input type="password" name="password" id="password" /><br />
<input type="submit" id="submit" />
</form>
<div id="demo"></div>
<script type="text/javascript">
(function () {
	var xhttp = new XMLHttpRequest();
	xhttp.onreadystatechange = function() {
		if (this.readyState == 4 && this.status == 200) {
			var json = JSON.parse(this.responseText);
			console.log(json);
			if (json.access_token) {
				document.getElementById("demo").innerHTML = "Your token: <span style=\"color: lightcoral; \">" + json.access_token + "</span>";
			}
		}
	};
	document.getElementById("submit").addEventListener("click", function (event) {
		event.preventDefault();
		var grant_type = document.getElementById("grant_type").value.trim();
		var username = document.getElementById("username").value.trim();
		var password = document.getElementById("password").value.trim();
		xhttp.open("POST", "//owncloudhk.net/oauth", true);
		xhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
		xhttp.send("grant_type=" + encodeURIComponent(grant_type) + "&username=" + encodeURIComponent(username) + "&password=" + encodeURIComponent(password));
	})
})()
</script>
</body>
</html>
